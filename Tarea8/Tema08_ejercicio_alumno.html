<!DOCTYPE html>
<html lang="es">

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Ejercicios – Tema 8 con Bootstrap 5</title>
	<!-- Bootstrap 5 CSS -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
	<style>
		.card+.card {
			margin-top: 1rem
		}
	</style>
</head>

<body class="bg-light">
	<div class="container pgit 
			<h1 class=" mb-4">Ejercicios - Tema 8: Validación de formularios</h1>
		<p class="text-muted">Se mantiene el patrón de validación con <code>addEventListener('submit', …)</code> y
			validación HTML5 donde corresponde.</p>

		<!-- EJ1 -->
		<div class="card">
			<div class="card-header">Ejercicio 1 – JS básico</div>
			<div class="card-body">
				<form id="bs-form-ej1" class="row g-3" novalidate>
					<div class="col-md-6">
						<label class="form-label">Usuario</label>
						<input class="form-control" type="text" name="usuario">
					</div>
					<div class="col-md-6">
						<label class="form-label">Contraseña</label>
						<input class="form-control" type="password" name="clave">
					</div>
					<div class="col-12">
						<button class="btn btn-primary" type="submit">Enviar</button>
					</div>
				</form>
				<div id="bs-msg-ej1" class="mt-2"></div>
			</div>
		</div>

		<!-- EJ2 -->

		<div class="card">
			<div class="card-header">Ejercicio 2 – Validación HTML5 nativa</div>
			<div class="card-body">
				<form id="bs-form-ej2" class="row g-3">
					<div class="col-md-4">
						<label class="form-label">Email</label>
						<input class="form-control" type="email" name="email" placeholder="correo@correodeejemplo.es"
							required>
					</div>
					<div class="col-md-4">
						<label class="form-label">Edad</label>
						<input class="form-control" type="number" name="edad" min="18" max="120"
							placeholder="Introduce tu edad" required>
					</div>
					<div class="col-md-4">
						<label class="form-label">Contraseña</label>
						<input class="form-control" type="password" name="clave" minlength="6"
							placeholder="introduce tu contraseña" required>
					</div>
					<div class="col-12">
						<button class="btn btn-primary" type="submit">Enviar</button>
					</div>
				</form>
				<div id="bs-msg-ej2" class="mt-2"></div>
			</div>
		</div>

		<!-- EJ3 -->

		<div class="card">
			<div class="card-header">Ejercicio 3 – Validación con patrón(Pattern)</div>
			<div class="card-body">
				<form id="bs-form-ej3" class="row g-3">
					<div class="col-md-12">
						<label class="form-label">Nombre y Apellidos</label>
						<input class="form-control" type="text" name="nomap"
							placeholder="Introduce tu nombre y tus apellidos" pattern="[A-Za-zÁÉÍÓÚáéíóúÑñ\- ]+"
							title="El formato permitido es de: Letras, espacios y guiones." required>
					</div>
					<div class="col-12">
						<button class="btn btn-primary" type="submit">Enviar</button>
					</div>
				</form>
				<div id="bs-msg-ej3" class="mt-2"></div>
			</div>
		</div>

		<!-- EJ4 -->

		<div class="card">
			<div class="card-header">Ejercicio 4 – Coincidencia de contraseñas</div>
			<div class="card-body">
				<form id="bs-form-ej4" class="row g-3" novalidate>
					<div class="col-md-6">
						<label class="form-label">Contraseña</label>
						<input class="form-control" type="password" name="clave" minlength="6"
							placeholder="Introduce tu contraseña" required>
					</div>
					<div class="col-md-6">
						<label class="form-label">Repetir contraseña</label>
						<input class="form-control" type="password" name="clave2" minlength="6"
							placeholder="Repite tu contraseña" required>
					</div>
					<div class="col-12">
						<button class="btn btn-primary" type="submit">Registrar</button>
					</div>
				</form>
				<div id="bs-msg-ej4" class="mt-2"></div>
			</div>
		</div>

		<!-- EJ5 -->
		<div class="card">
			<div class="card-header">Ejercicio 5 – Registro completo</div>
			<div class="card-body">
				<form id="bs-form-ej5" class="row g-3" novalidate>
					<div class="col-md-12">
						<label class="form-label">Nombre y Apellidos</label>
						<input class="form-control" type="text" name="nomap"
							placeholder="Introduce tu nombre y tus apellidos" pattern="[A-Za-zÁÉÍÓÚáéíóúÑñ\- ]+"
							title="El formato permitido es de: Letras, espacios y guiones." required>
					</div>
					<div class="col-md-4">
						<label class="form-label">Email</label>
						<input class="form-control" type="email" name="email" placeholder="correo@correodeejemplo.es"
							required>
					</div>
					<div class="col-md-4">
						<label class="form-label">Edad</label>
						<input class="form-control" type="number" name="edad" min="16" max="120"
							placeholder="Introduce tu edad" required>
					</div>
					<div class="col-md-6">
						<label class="form-label">Contraseña</label>
						<input class="form-control" type="password" name="clave" minlength="6"
							placeholder="Introduce tu contraseña" required>
					</div>
					<div class="col-md-6">
						<label class="form-label">Repetir contraseña</label>
						<input class="form-control" type="password" name="clave2" minlength="6"
							placeholder="Repite tu contraseña" required>
					</div>
					<div class="col-12">
						<div class="form-check">
							<input class="form-check-input" type="checkbox" name="terminos" id="terminos" required>
							<label class="form-check-label" for="terminos">
								Acepto los términos y condiciones
							</label>
						</div>
					</div>
					<div class="col-12">
						<button class="btn btn-primary" type="submit">Registrar</button>
					</div>
				</form>
				<div id="bs-msg-ej5" class="mt-2"></div>
			</div>
		</div>

		<!-- Bootstrap 5 JS (bundle con Popper) -->
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
			integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
			crossorigin="anonymous"></script>
		<script>
			// TODO: Aquí va el código de validación 
			document.getElementById('bs-form-ej1').addEventListener('submit', function (e) {
				e.preventDefault();

				const usuario = this.usuario.value.trim();
				const clave = this.clave.value.trim();
				const msg = document.getElementById('bs-msg-ej1');

				if (usuario === '' || clave === '') {
					msg.textContent = 'Error, debes rellenar todos los campos.';
					msg.className = 'mt-3 fw-bold text-danger';
				} else {
					msg.textContent = 'Correcto, formulario completado correctamente.';
					msg.className = 'mt-3 fw-bold text-success';
				}
			});

			document.getElementById('bs-form-ej2').addEventListener('submit', function (e) {

				e.preventDefault();
				const msg = document.getElementById('bs-msg-ej2');


				msg.textContent = 'Correcto, formulario completado correctamente.';
				msg.className = 'mt-3 fw-bold text-success';


			});

			document.getElementById('bs-form-ej3').addEventListener('submit', function (e) {

				e.preventDefault();
				const msg = document.getElementById('bs-msg-ej3');


				msg.textContent = 'Correcto, formulario completado correctamente.';
				msg.className = 'mt-3 fw-bold text-success';


			});

			document.getElementById('bs-form-ej4').addEventListener('submit', function (e) {
				e.preventDefault();

				const clave = this.clave.value.trim();
				const clave2 = this.clave2.value.trim();
				const msg = document.getElementById('bs-msg-ej4');

				if (clave.length < 6 || clave2.length < 6) {
					msg.textContent = 'Error, la contraseña debe tener como mínimo 6 caracteres.';
					msg.className = 'mt-3 fw-bold text-danger';
					return;
				}

				if (clave != clave2) {
					msg.textContent = 'Error, las contraseñas no coinciden entre si.';
					msg.className = 'mt-3 fw-bold text-danger'
				} else {
					msg.textContent = 'Correcto, formulario completado correctamente.';
					msg.className = 'mt-3 fw-bold text-success';
				}

			});

			document.getElementById("bs-form-ej5").addEventListener("submit", function (e) {
				e.preventDefault();

				const form = e.target;
				const msgDiv = document.getElementById("bs-msg-ej5");

				if (!form.checkValidity()) {
					msgDiv.innerHTML = `<div class="alert alert-danger">Por favor, revisa los campos del formulario.</div>`;
					form.reportValidity();
					return;
				}

				const nomap = form.nomap.value.trim();
				const email = form.email.value.trim();
				const edad = parseInt(form.edad.value);
				const clave = form.clave.value;
				const clave2 = form.clave2.value;
				const aceptaTerminos = form.terminos.checked;

				if (clave !== clave2) {
					msgDiv.innerHTML = `<div class="alert alert-danger">Las contraseñas no coinciden.</div>`;
					return;
				}

				const datos = {
					nombre: nomap,
					email: email,
					edad: edad,
					acepta_terminos: aceptaTerminos
				};

				msgDiv.innerHTML = `<div class="alert alert-success"><strong>Registro correcto</strong><br><pre>${JSON.stringify(datos, null, 2)}</pre></div>`;

				form.reset();

			});

		</script>
</body>

</html>